<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calendario Inteligente</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Vista de AutenticaciÃ³n -->
    <main id="authView" class="auth-view">
        <div class="auth-card">
            <div class="auth-header">
                <img src="assets/logo.svg" alt="Logo" class="auth-logo">
                <h1>Calendario Inteligente</h1>
                <p>Planifica tus tareas de manera eficiente</p>
            </div>
            <form id="loginForm" class="auth-form">
                <div class="input-group">
                    <label for="loginEmail">Correo electrÃ³nico</label>
                    <input type="email" id="loginEmail" placeholder="demo@demo.com" required>
                </div>
                <div class="input-group">
                    <label for="loginPassword">ContraseÃ±a</label>
                    <input type="password" id="loginPassword" placeholder="demo123" required>
                </div>
                <button type="submit" class="btn btn-primary btn-block">Iniciar SesiÃ³n</button>
                <p class="auth-hint">
                    <strong>Demo:</strong> demo@demo.com / demo123
                </p>
            </form>
        </div>
    </main>

    <!-- Vista de AplicaciÃ³n -->
    <div id="appView" class="app-view" style="display:none;">
        <!-- Topbar -->
        <header class="topbar">
            <div class="topbar-left">
                <button id="toggleSidebar" class="btn-icon" title="MenÃº">â˜°</button>
                <img src="assets/logo.svg" alt="Logo" class="topbar-logo">
                <h1 class="topbar-title">Calendario Inteligente</h1>
            </div>
            <div class="topbar-right">
                <button id="helpButton" class="btn-icon" title="Ayuda (?)">â“</button>
                <div class="user-menu">
                    <img src="assets/avatar.png" alt="Avatar" class="user-avatar">
                    <span id="userEmail" class="user-email">usuario@ejemplo.com</span>
                    <button id="logoutButton" class="btn btn-secondary btn-sm">Cerrar SesiÃ³n</button>
                </div>
            </div>
        </header>

        <div class="app-container">
            <!-- Sidebar -->
            <aside id="sidebar" class="sidebar">
                <nav class="sidebar-nav">
                    <a href="#" data-view="dashboard" class="nav-item active">
                        <span class="nav-icon">ğŸ“Š</span>
                        <span class="nav-label">Dashboard</span>
                    </a>
                    <a href="#" data-view="calendar" class="nav-item">
                        <span class="nav-icon">ğŸ“†</span>
                        <span class="nav-label">Calendario</span>
                    </a>
                    <a href="#" data-view="tasks" class="nav-item">
                        <span class="nav-icon">âœ“</span>
                        <span class="nav-label">Tareas</span>
                    </a>
                    <a href="#" data-view="routePlanner" class="nav-item">
                        <span class="nav-icon">ğŸ—ºï¸</span>
                        <span class="nav-label">Rutas</span>
                    </a>
                    <a href="#" data-view="settings" class="nav-item">
                        <span class="nav-icon">âš™ï¸</span>
                        <span class="nav-label">ConfiguraciÃ³n</span>
                    </a>
                </nav>
            </aside>

            <!-- Main Content -->
            <main class="main-content">
                <!-- Dashboard View -->
                <section id="viewDashboard" class="content-view active">
                    <h2>ğŸ“Š Dashboard</h2>

                    <div class="dashboard-grid">
                        <div class="card">
                            <h3>ğŸ“‹ Tareas Pendientes</h3>
                            <div id="dashboardUnassignedTasks" class="task-list"></div>
                        </div>

                        <div class="card">
                            <h3>ğŸ’¡ Sugerencias del DÃ­a</h3>
                            <div id="dashboardSuggestions" class="suggestions-list"></div>
                        </div>
                    </div>
                </section>

                <!-- Calendar View -->
                <section id="viewCalendar" class="content-view">
                    <h2>ğŸ“† Calendario Semanal</h2>

                    <div class="calendar-controls">
                        <button id="prevWeek" class="btn btn-secondary">â† Semana Anterior</button>
                        <span id="currentWeek" class="week-display"></span>
                        <button id="nextWeek" class="btn btn-secondary">Semana Siguiente â†’</button>
                    </div>

                    <div id="calendar" class="calendar-grid"></div>
                </section>

                <!-- Tasks View -->
                <section id="viewTasks" class="content-view">
                    <h2>âœ“ GestiÃ³n de Tareas</h2>

                    <div class="card">
                        <h3>â• AÃ±adir Nueva Tarea</h3>
                        <form id="taskForm">
                            <div class="form-row">
                                <div class="input-group">
                                    <label for="taskName">Nombre de la tarea:</label>
                                    <input type="text" id="taskName" placeholder="Ej: Comprar verduras" required>
                                </div>

                                <div class="input-group">
                                    <label for="taskDuration">DuraciÃ³n (horas):</label>
                                    <input type="number" id="taskDuration" min="0.25" max="24" step="0.25" value="1" required>
                                </div>
                            </div>

                            <div class="form-row">
                                <div class="input-group">
                                    <label for="taskLocation">UbicaciÃ³n/Lugar:</label>
                                    <input type="text" id="taskLocation" placeholder="Ej: Supermercado Centro" required>
                                </div>

                                <div class="input-group autocomplete-wrapper">
                                    <label for="taskAddress">DirecciÃ³n especÃ­fica (opcional):</label>
                                    <input type="text" id="taskAddress" placeholder="Ej: Calle Comercio 789" autocomplete="off">
                                    <div id="taskAddressSuggestions" class="autocomplete-suggestions"></div>
                                </div>
                            </div>

                            <div class="form-row">
                                <div class="input-group">
                                    <label for="taskPriority">Prioridad:</label>
                                    <select id="taskPriority" required>
                                        <option value="baja">Baja</option>
                                        <option value="media" selected>Media</option>
                                        <option value="alta">Alta</option>
                                        <option value="urgente">Urgente</option>
                                    </select>
                                </div>

                                <div class="input-group">
                                    <label for="taskDeadline">Fecha lÃ­mite (opcional):</label>
                                    <input type="text" id="taskDeadline" placeholder="DD-MM-YYYY" maxlength="10">
                                </div>
                            </div>

                            <div class="form-row">
                                <div class="input-group">
                                    <label for="taskWindowStart">Ventana inicio (opcional):</label>
                                    <input type="text" id="taskWindowStart" placeholder="DD-MM-YYYY" maxlength="10">
                                </div>

                                <div class="input-group">
                                    <label for="taskWindowEnd">Ventana fin (opcional):</label>
                                    <input type="text" id="taskWindowEnd" placeholder="DD-MM-YYYY" maxlength="10">
                                </div>
                            </div>

                            <button type="submit" class="btn btn-success">AÃ±adir Tarea</button>
                        </form>
                    </div>

                    <div class="card">
                        <h3>ğŸ“‹ Tareas Pendientes (Sin Asignar)</h3>
                        <div id="unassignedTasks" class="task-list"></div>
                    </div>

                    <div class="card">
                        <h3>ğŸ’¡ Sugerencias Inteligentes</h3>
                        <p style="color: var(--text-muted); margin-bottom: 16px;">
                            El sistema analiza tus tareas y sugiere la mejor manera de agruparlas para ahorrar tiempo.
                        </p>
                        <div id="suggestions" class="suggestions-list"></div>
                    </div>

                    <div class="card">
                        <h3>ğŸ“‹ Todas las Tareas</h3>
                        <div id="allTasks" class="all-tasks-list"></div>
                    </div>
                </section>

                <!-- Settings View -->
                <section id="viewSettings" class="content-view">
                    <h2>âš™ï¸ ConfiguraciÃ³n</h2>

                    <div class="card">
                        <h3>ğŸ“ Ubicaciones</h3>
                        <div class="locations-section">
                            <div class="location-card">
                                <h4>ğŸ  Casa</h4>
                                <div class="input-group autocomplete-wrapper">
                                    <label for="homeAddress">DirecciÃ³n de casa:</label>
                                    <input type="text" id="homeAddress" placeholder="Ej: Calle Principal 123, Ciudad" autocomplete="off">
                                    <div id="homeAddressSuggestions" class="autocomplete-suggestions"></div>
                                </div>
                                <button id="detectHome" class="btn btn-secondary">ğŸ“ Detectar mi ubicaciÃ³n actual</button>
                                <div id="homeCoords" class="coords-display"></div>
                            </div>

                            <div class="location-card">
                                <h4>ğŸ’¼ Trabajo</h4>
                                <div class="input-group autocomplete-wrapper">
                                    <label for="workAddress">DirecciÃ³n del trabajo:</label>
                                    <input type="text" id="workAddress" placeholder="Ej: Avenida Empresarial 456, Ciudad" autocomplete="off">
                                    <div id="workAddressSuggestions" class="autocomplete-suggestions"></div>
                                </div>
                                <button id="detectWork" class="btn btn-secondary">ğŸ“ Detectar mi ubicaciÃ³n actual</button>
                                <div id="workCoords" class="coords-display"></div>
                            </div>

                            <div class="location-card">
                                <h4>â±ï¸ Tiempos de traslado</h4>
                                <div class="input-group">
                                    <label for="homeToWork">Casa â†’ Trabajo (minutos):</label>
                                    <input type="number" id="homeToWork" min="0" step="5" placeholder="Ej: 30">
                                </div>
                                <div class="input-group">
                                    <label for="workToHome">Trabajo â†’ Casa (minutos):</label>
                                    <input type="number" id="workToHome" min="0" step="5" placeholder="Ej: 35">
                                </div>
                                <button id="calculateCommute" class="btn btn-primary">ğŸš— Calcular automÃ¡ticamente</button>
                            </div>
                        </div>
                        <button id="saveLocations" class="btn btn-success btn-large">Guardar Ubicaciones</button>
                        <div id="locationInfo" class="info-box"></div>
                    </div>

                    <div class="card">
                        <h3>â° Horario Laboral</h3>
                        <div class="work-schedule">
                            <div class="input-group">
                                <label for="workStart">Hora de inicio:</label>
                                <input type="time" id="workStart" value="08:00">
                            </div>
                            <div class="input-group">
                                <label for="workEnd">Hora de fin:</label>
                                <input type="time" id="workEnd" value="17:30">
                            </div>
                            <button id="saveWorkSchedule" class="btn btn-primary">Guardar Horario</button>
                        </div>
                        <div id="scheduleInfo" class="info-box"></div>
                    </div>

                    <div class="card">
                        <h3>ğŸš— Medio de Transporte Preferido</h3>
                        <div class="transport-options">
                            <div class="input-group">
                                <label for="transportMode">Modo de transporte:</label>
                                <select id="transportMode">
                                    <option value="driving">ğŸš— Auto</option>
                                    <option value="transit">ğŸšŒ Transporte PÃºblico</option>
                                    <option value="bicycling">ğŸš´ Bicicleta</option>
                                    <option value="walking">ğŸš¶ A pie</option>
                                </select>
                            </div>
                            <div class="input-group">
                                <label for="maxDetour">DesvÃ­o mÃ¡ximo aceptable (minutos):</label>
                                <input type="number" id="maxDetour" value="10" min="0" max="60" step="5">
                                <small>Tiempo extra que estÃ¡s dispuesto a agregar para hacer tareas en el camino</small>
                            </div>
                            <button id="saveTransport" class="btn btn-primary">Guardar Preferencias</button>
                        </div>
                        <div id="transportInfo" class="info-box"></div>
                    </div>

                    <div class="card">
                        <h3>ğŸ” Tipos de Lugares de InterÃ©s</h3>
                        <div class="poi-types">
                            <label class="checkbox-label">
                                <input type="checkbox" class="poi-type" value="supermercado" checked>
                                <span>ğŸ›’ Supermercados</span>
                            </label>
                            <label class="checkbox-label">
                                <input type="checkbox" class="poi-type" value="farmacia" checked>
                                <span>ğŸ’Š Farmacias</span>
                            </label>
                            <label class="checkbox-label">
                                <input type="checkbox" class="poi-type" value="banco" checked>
                                <span>ğŸ¦ Bancos/Cajeros</span>
                            </label>
                            <label class="checkbox-label">
                                <input type="checkbox" class="poi-type" value="gasolinera">
                                <span>â›½ Gasolineras</span>
                            </label>
                            <label class="checkbox-label">
                                <input type="checkbox" class="poi-type" value="correo">
                                <span>ğŸ“® Oficinas de Correo</span>
                            </label>
                            <label class="checkbox-label">
                                <input type="checkbox" class="poi-type" value="tienda">
                                <span>ğŸª Tiendas de Conveniencia</span>
                            </label>
                        </div>
                    </div>
                </section>

                <!-- Route Planner View -->
                <section id="viewRoutePlanner" class="content-view">
                    <h2>ğŸ—ºï¸ Planificador de Rutas</h2>

                    <div class="card">
                        <h3>Planificar Ruta Optimizada</h3>
                        <div class="route-planner-controls">
                            <div class="form-row">
                                <div class="input-group">
                                    <label for="routeOrigin">Origen:</label>
                                    <select id="routeOrigin">
                                        <option value="home">ğŸ  Casa</option>
                                        <option value="work">ğŸ’¼ Trabajo</option>
                                        <option value="current">ğŸ“ Mi ubicaciÃ³n actual</option>
                                    </select>
                                </div>
                                <div class="input-group">
                                    <label for="routeDestination">Destino:</label>
                                    <select id="routeDestination">
                                        <option value="work">ğŸ’¼ Trabajo</option>
                                        <option value="home">ğŸ  Casa</option>
                                    </select>
                                </div>
                            </div>
                            <div class="input-group">
                                <label for="routeTime">Hora estimada de salida:</label>
                                <input type="time" id="routeTime" value="08:00">
                            </div>
                            <button id="calculateRoute" class="btn btn-success btn-large">ğŸ” Buscar Ruta Optimizada</button>
                        </div>
                    </div>

                    <div id="routeResults" class="route-results" style="display:none;">
                        <div class="card">
                            <h3>ğŸ“ Ruta Sugerida</h3>
                            <div id="routeMap" class="route-map-container"></div>
                            <div id="routeSummary" class="route-summary"></div>
                        </div>

                        <div class="card">
                            <h3>ğŸ›ï¸ Lugares en la Ruta</h3>
                            <div id="poisOnRoute" class="pois-list"></div>
                        </div>

                        <div class="card">
                            <h3>âœ… Tareas que puedes hacer en el camino</h3>
                            <div id="tasksOnRoute" class="tasks-on-route"></div>
                        </div>
                    </div>
                </section>
            </main>
        </div>
    </div>

    <!-- Modal de Ayuda -->
    <div id="helpModal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2>ğŸš€ CÃ³mo Usar el Calendario Inteligente</h2>

            <div class="help-section">
                <h3>1ï¸âƒ£ Configurar Ubicaciones ğŸ“</h3>
                <ol>
                    <li>Ve a <strong>"âš™ï¸ ConfiguraciÃ³n"</strong></li>
                    <li>Escribe tu direcciÃ³n de casa (aparecerÃ¡n sugerencias)</li>
                    <li>O usa <strong>"ğŸ“ Detectar mi ubicaciÃ³n actual"</strong> con GPS</li>
                    <li>Repite para tu trabajo</li>
                    <li>Haz clic en <strong>"ğŸš— Calcular automÃ¡ticamente"</strong> para tiempos de traslado</li>
                    <li>Guarda con el botÃ³n verde</li>
                </ol>
            </div>

            <div class="help-section">
                <h3>2ï¸âƒ£ Configurar Horario Laboral â°</h3>
                <ol>
                    <li>En ConfiguraciÃ³n, ajusta tu hora de inicio (ej: 08:00)</li>
                    <li>Ajusta tu hora de fin (ej: 17:30)</li>
                    <li>Haz clic en <strong>"Guardar Horario"</strong></li>
                </ol>
            </div>

            <div class="help-section">
                <h3>3ï¸âƒ£ Agregar Tareas â•</h3>
                <ol>
                    <li>Ve a la vista <strong>"âœ“ Tareas"</strong></li>
                    <li>Completa el formulario con nombre, duraciÃ³n, ubicaciÃ³n, etc.</li>
                    <li>Haz clic en <strong>"AÃ±adir Tarea"</strong></li>
                </ol>
            </div>

            <div class="help-section">
                <h3>4ï¸âƒ£ Ver Sugerencias ğŸ’¡</h3>
                <p>En el Dashboard, la app te sugiere automÃ¡ticamente:</p>
                <ul>
                    <li><strong>ğŸ—ºï¸ Tareas cercanas</strong>: Agrupa tareas a menos de 2km</li>
                    <li><strong>âš ï¸ Tareas urgentes</strong>: Prioriza lo importante</li>
                    <li><strong>â° Fechas lÃ­mite</strong>: Te alerta cuando se acercan</li>
                </ul>
            </div>

            <div class="help-section">
                <h3>ğŸ’¡ Atajos de Teclado</h3>
                <ul>
                    <li><strong>G + D</strong>: Ir al Dashboard</li>
                    <li><strong>G + C</strong>: Ir al Calendario</li>
                    <li><strong>G + T</strong>: Ir a Tareas</li>
                    <li><strong>?</strong>: Mostrar ayuda</li>
                </ul>
            </div>
        </div>
    </div>

    <!-- Toast Container -->
    <div id="toastContainer" class="toast-container"></div>

    <script src="config.js"></script>
    <script src="google-maps-api.js"></script>
    <script src="app.js"></script>
</body>
</html>
